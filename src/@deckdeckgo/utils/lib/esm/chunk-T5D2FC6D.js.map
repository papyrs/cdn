{
  "version": 3,
  "sources": ["../../src/selection.utils.ts"],
  "sourcesContent": ["export const clearTheSelection = () => {\n  if (window && window.getSelection) {\n    if (window.getSelection()?.empty) {\n      window.getSelection()?.empty();\n    } else if (window.getSelection()?.removeAllRanges) {\n      window.getSelection()?.removeAllRanges();\n    }\n  } else if (document && (document as any).selection) {\n    (document as any).selection.empty();\n  }\n};\n\nexport const getSelection = (): Selection | null => {\n  if (window && window.getSelection) {\n    return window.getSelection();\n  } else if (document && document.getSelection) {\n    return document.getSelection();\n  } else if (document && (document as any).selection) {\n    return (document as any).selection.createRange().text;\n  }\n\n  return null;\n};\n\nexport const getAnchorElement = (selection: Selection | undefined): HTMLElement | null => {\n  const anchorNode: Node | null | undefined = selection?.anchorNode;\n\n  if (!anchorNode) {\n    return null;\n  }\n\n  return anchorNode.nodeType !== Node.TEXT_NODE && anchorNode.nodeType !== Node.COMMENT_NODE\n    ? (anchorNode as HTMLElement)\n    : anchorNode.parentElement;\n};\n\n// https://stackoverflow.com/a/3866442/5404186\nexport const moveCursorToEnd = (element: Node | undefined) => {\n  moveCursor({element, collapse: 'end'});\n};\n\nexport const moveCursorToStart = (element: Node | undefined) => {\n  moveCursor({element, collapse: 'start'});\n};\n\nconst moveCursor = ({element, collapse}: {element: Node | undefined; collapse: 'start' | 'end'}) => {\n  if (!element) {\n    return;\n  }\n\n  const range: Range = document.createRange();\n  range.selectNodeContents(element);\n  range.collapse(collapse === 'start');\n\n  addRangeAndDetach(range);\n};\n\nexport const moveCursorToOffset = ({element, offset}: {element: Node | undefined; offset: number}) => {\n  if (!element) {\n    return;\n  }\n\n  const range: Range = document.createRange();\n  range.setStart(element, offset);\n\n  addRangeAndDetach(range);\n};\n\nconst addRangeAndDetach = (range: Range) => {\n  const selection: Selection | null = getSelection();\n  selection?.removeAllRanges();\n  selection?.addRange(range);\n\n  range.detach();\n};\n\nexport const caretPosition = ({target}: {target: Node}): number | undefined => {\n  const selection: Selection | null = getSelection();\n\n  const range: Range | undefined = selection?.getRangeAt(0);\n  const clonedRange: Range | undefined = range?.cloneRange();\n\n  if (!clonedRange || !range) {\n    return undefined;\n  }\n\n  const {endContainer, endOffset} = range;\n\n  clonedRange.selectNodeContents(target);\n  clonedRange.setEnd(endContainer, endOffset);\n\n  return clonedRange.toString().length;\n};\n"],
  "mappings": "AAAO,GAAM,GAAoB,IAAM,CACrC,AAAI,QAAU,OAAO,aACnB,AAAI,OAAO,gBAAgB,MACzB,OAAO,gBAAgB,QACd,OAAO,gBAAgB,iBAChC,OAAO,gBAAgB,kBAEhB,UAAa,SAAiB,WACtC,SAAiB,UAAU,SAInB,EAAe,IACtB,QAAU,OAAO,aACZ,OAAO,eACL,UAAY,SAAS,aACvB,SAAS,eACP,UAAa,SAAiB,UAC/B,SAAiB,UAAU,cAAc,KAG5C,KAGI,EAAmB,AAAC,GAAyD,CACxF,GAAM,GAAsC,GAAW,WAEvD,MAAK,GAIE,EAAW,WAAa,KAAK,WAAa,EAAW,WAAa,KAAK,aACzE,EACD,EAAW,cALN,MASE,EAAkB,AAAC,GAA8B,CAC5D,EAAW,CAAC,UAAS,SAAU,SAGpB,EAAoB,AAAC,GAA8B,CAC9D,EAAW,CAAC,UAAS,SAAU,WAG3B,EAAa,CAAC,CAAC,UAAS,cAAsE,CAClG,GAAI,CAAC,EACH,OAGF,GAAM,GAAe,SAAS,cAC9B,EAAM,mBAAmB,GACzB,EAAM,SAAS,IAAa,SAE5B,EAAkB,IAGP,EAAqB,CAAC,CAAC,UAAS,YAAyD,CACpG,GAAI,CAAC,EACH,OAGF,GAAM,GAAe,SAAS,cAC9B,EAAM,SAAS,EAAS,GAExB,EAAkB,IAGd,EAAoB,AAAC,GAAiB,CAC1C,GAAM,GAA8B,IACpC,GAAW,kBACX,GAAW,SAAS,GAEpB,EAAM,UAGK,EAAgB,CAAC,CAAC,YAAgD,CAG7E,GAAM,GAA2B,AAFG,KAEQ,WAAW,GACjD,EAAiC,GAAO,aAE9C,GAAI,CAAC,GAAe,CAAC,EACnB,OAGF,GAAM,CAAC,eAAc,aAAa,EAElC,SAAY,mBAAmB,GAC/B,EAAY,OAAO,EAAc,GAE1B,EAAY,WAAW",
  "names": []
}
