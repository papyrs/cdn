import{A as t,H as e}from"./p-73cd87c9.js";const a=({IDL:t})=>{const e=t.Int,a=t.Record({id:t.Text,updated_at:e}),n=t.Record({id:t.Text,updated_at:e,data:t.Vec(t.Nat8),created_at:e}),i=t.Record({notContains:t.Opt(t.Text),startsWith:t.Opt(t.Text)}),r=t.Record({id:t.Text,updated_at:t.Opt(e),data:t.Vec(t.Nat8),created_at:t.Opt(e)});return t.Service({cyclesBalance:t.Func([],[t.Nat],["query"]),del:t.Func([t.Text],[],[]),delete:t.Func([t.Text,a],[],[]),get:t.Func([t.Text],[t.Opt(n)],["query"]),list:t.Func([t.Opt(i)],[t.Vec(t.Tuple(t.Text,n))],["query"]),put:t.Func([t.Text,r],[n],[]),set:t.Func([t.Text,n],[],[]),transferFreezingThresholdCycles:t.Func([],[],[])})},n=({IDL:t})=>{const e=t.Record({owner:t.Principal,bucketId:t.Opt(t.Principal)});return t.Service({cyclesBalance:t.Func([],[t.Nat],["query"]),delData:t.Func([],[t.Bool],[]),delStorage:t.Func([],[t.Bool],[]),getData:t.Func([],[t.Opt(e)],["query"]),getStorage:t.Func([],[t.Opt(e)],["query"]),initData:t.Func([],[e],[]),initStorage:t.Func([],[e],[]),installCode:t.Func([t.Principal,t.Vec(t.Nat8),t.Vec(t.Nat8)],[],[]),knownBucket:t.Func([t.Text,t.Text],[t.Bool],[]),list:t.Func([t.Text],[t.Vec(e)],["query"]),transferCycles:t.Func([t.Principal,t.Nat],[],[])})},i=({IDL:t})=>{const e=t.Tuple(t.Text,t.Text),a=t.Tuple(t.Text,t.Text),n=t.Record({url:t.Text,method:t.Text,body:t.Vec(t.Nat8),headers:t.Vec(a)}),i=t.Record({token:t.Opt(t.Text),sha256:t.Opt(t.Vec(t.Nat8)),fullPath:t.Text,headers:t.Vec(a),index:t.Nat}),r=t.Variant({Callback:t.Record({token:i,callback:t.Func([],[],[])})}),c=t.Record({body:t.Vec(t.Nat8),headers:t.Vec(a),streaming_strategy:t.Opt(r),status_code:t.Nat16}),s=t.Record({token:t.Opt(t.Text),sha256:t.Opt(t.Vec(t.Nat8)),fullPath:t.Text,headers:t.Vec(a),index:t.Nat}),d=t.Record({token:t.Opt(i),body:t.Vec(t.Nat8)}),o=t.Record({token:t.Opt(t.Text),sha256:t.Opt(t.Vec(t.Nat8)),name:t.Text,fullPath:t.Text,folder:t.Text}),l=t.Record({content:t.Vec(t.Nat8),batchId:t.Nat});return t.Service({commitUpload:t.Func([t.Record({headers:t.Vec(e),chunkIds:t.Vec(t.Nat),batchId:t.Nat})],[],[]),cyclesBalance:t.Func([],[t.Nat],["query"]),del:t.Func([t.Record({token:t.Opt(t.Text),fullPath:t.Text})],[],[]),http_request:t.Func([n],[c],["query"]),http_request_streaming_callback:t.Func([s],[d],["query"]),initUpload:t.Func([o],[t.Record({batchId:t.Nat})],[]),list:t.Func([t.Opt(t.Text)],[t.Vec(o)],["query"]),transferFreezingThresholdCycles:t.Func([],[],[]),uploadChunk:t.Func([l],[t.Record({chunkId:t.Nat})],[])})};class r{constructor(){}static getInstance(){return r.instance||(r.instance=new r),r.instance}set(t){this.env=t}get(){if(void 0===this.env)throw new Error("No IC environment configuration set.");return this.env}localIdentity(){return void 0!==this.get().localIdentityCanisterId}}const c=async({canisterId:a,idlFactory:n,identity:i})=>{const c=r.getInstance().localIdentity()?"http://localhost:8000/":"https://ic0.app",s=new e(Object.assign({identity:i},c&&{host:c}));return r.getInstance().localIdentity()&&await s.fetchRootKey(),t.createActor(n,{agent:s,canisterId:a})};var s,d,o,l,y,u,h;(d=s||(s={})).TITLE="title",d.CONTENT="content",d.SPLIT="split",d.GIF="gif",d.AUTHOR="author",d.YOUTUBE="youtube",d.QRCODE="qrcode",d.CHART="chart",d.POLL="poll",d["ASPECT-RATIO"]="aspect-ratio",d.PLAYGROUND="playground",(l=o||(o={})).DEFAULT="default",l.COMMUNITY="community",l.USER="user",function(t){t.LINE="line",t.PIE="pie",t.BAR="bar"}(y||(y={})),(h=u||(u={})).DEFAULT="default",h.DEMO="demo";const p=t=>t?[t]:[],g=t=>null==t?void 0:t[0],w=async t=>{const e=new Blob([JSON.stringify(t)],{type:"application/json; charset=utf-8"});return[...new Uint8Array(await e.arrayBuffer())]},k=async t=>{const e=new Blob([new Uint8Array(t)],{type:"application/json; charset=utf-8"});return JSON.parse(await e.text())},I=({identity:t})=>c({canisterId:r.getInstance().get().managerCanisterId,idlFactory:n,identity:t}),b=async({identity:t})=>m({identity:t,idlFactory:a,initBucket:_}),f=async({identity:t})=>m({identity:t,idlFactory:i,initBucket:B}),m=async({identity:t,idlFactory:e,initBucket:a})=>{if(!t)throw new Error("Invalid identity.");const n=await I({identity:t}),i=await a({managerActor:n}),r=g(i.bucketId);return{bucketId:r,actor:r?await q({identity:t,bucketId:r,idlFactory:e}):void 0}},q=({identity:t,bucketId:e,idlFactory:a})=>c({canisterId:e,idlFactory:a,identity:t}),_=async({managerActor:t})=>g(await t.getData())||await t.initData(),B=async({managerActor:t})=>g(await t.getStorage())||await t.initStorage(),F=BigInt(144e11),C="https://identity.ic0.app";export{r as E,f as a,g as b,w as c,c as d,F as e,k as f,b as g,I as h,C as i,p as t}