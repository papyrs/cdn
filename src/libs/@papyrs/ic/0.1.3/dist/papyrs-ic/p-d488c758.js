import{a as t,H as e}from"./p-963e2329.js";const a=({IDL:t})=>{const e=t.Principal,a=t.Int,n=t.Record({id:t.Text,updated_at:a}),i=t.Record({id:t.Text,updated_at:a}),r=t.Record({id:t.Text,updated_at:a,data:t.Vec(t.Nat8),created_at:a}),s=t.Record({id:t.Text,updated_at:a,data:t.Vec(t.Nat8),created_at:a,author:e}),c=t.Record({notContains:t.Opt(t.Text),startsWith:t.Opt(t.Text)}),o=t.Record({id:t.Text,updated_at:t.Opt(a),data:t.Vec(t.Nat8),created_at:t.Opt(a)}),d=t.Record({id:t.Text,updated_at:t.Opt(a),data:t.Vec(t.Nat8),created_at:t.Opt(a),author:e});return t.Service({countLikes:t.Func([t.Text],[t.Nat],["query"]),cyclesBalance:t.Func([],[t.Nat],["query"]),del:t.Func([t.Text],[],[]),delete:t.Func([t.Text,n],[],[]),deleteInteraction:t.Func([t.Text,i],[],[]),get:t.Func([t.Text],[t.Opt(r)],["query"]),getComment:t.Func([t.Text,t.Text],[t.Opt(s)],["query"]),getLike:t.Func([t.Text],[t.Opt(s)],["query"]),list:t.Func([t.Opt(c)],[t.Vec(t.Tuple(t.Text,r))],["query"]),listComments:t.Func([t.Text],[t.Vec(t.Tuple(t.Text,s))],["query"]),listInteractions:t.Func([t.Vec(t.Text)],[t.Vec(t.Tuple(t.Text,t.Record({countComments:t.Nat,countLikes:t.Nat,like:t.Opt(s)})))],["query"]),put:t.Func([t.Text,o],[r],[]),putInteraction:t.Func([t.Text,d],[s],[]),set:t.Func([t.Text,r],[],[]),transferFreezingThresholdCycles:t.Func([],[],[])})},n=({IDL:t})=>{const e=t.Record({owner:t.Principal,bucketId:t.Opt(t.Principal)});return t.Service({cyclesBalance:t.Func([],[t.Nat],["query"]),delData:t.Func([],[t.Bool],[]),delStorage:t.Func([],[t.Bool],[]),getData:t.Func([],[t.Opt(e)],["query"]),getStorage:t.Func([],[t.Opt(e)],["query"]),initData:t.Func([],[e],[]),initStorage:t.Func([],[e],[]),installCode:t.Func([t.Principal,t.Vec(t.Nat8),t.Vec(t.Nat8)],[],[]),knownBucket:t.Func([t.Text,t.Text],[t.Bool],[]),list:t.Func([t.Text],[t.Vec(e)],["query"]),storageLoadWasm:t.Func([t.Vec(t.Nat8)],[t.Record({total:t.Nat,chunks:t.Nat})],[]),storageResetWasm:t.Func([],[],[]),transferCycles:t.Func([t.Principal,t.Nat],[],[])})},i=({IDL:t})=>{const e=t.Record({batch_id:t.Nat,headers:t.Vec(t.Tuple(t.Text,t.Text)),chunk_ids:t.Vec(t.Nat)}),a=t.Record({token:t.Opt(t.Text),full_path:t.Text}),n=t.Record({url:t.Text,method:t.Text,body:t.Vec(t.Nat8),headers:t.Vec(t.Tuple(t.Text,t.Text))}),i=t.Record({token:t.Opt(t.Text),sha256:t.Opt(t.Vec(t.Nat8)),headers:t.Vec(t.Tuple(t.Text,t.Text)),index:t.Nat64,full_path:t.Text}),r=t.Variant({Callback:t.Record({token:i,callback:t.Func([],[],[])})}),s=t.Record({body:t.Vec(t.Nat8),headers:t.Vec(t.Tuple(t.Text,t.Text)),streaming_strategy:t.Opt(r),status_code:t.Nat16}),c=t.Record({token:t.Opt(i),body:t.Vec(t.Nat8)}),o=t.Record({token:t.Opt(t.Text),sha256:t.Opt(t.Vec(t.Nat8)),name:t.Text,full_path:t.Text,folder:t.Text}),d=t.Record({batch_id:t.Nat}),u=t.Record({content:t.Vec(t.Nat8),batch_id:t.Nat}),l=t.Record({chunk_id:t.Nat});return t.Service({commitUpload:t.Func([e],[],[]),cyclesBalance:t.Func([],[t.Nat],["query"]),del:t.Func([a],[],[]),http_request:t.Func([n],[s],["query"]),http_request_streaming_callback:t.Func([i],[c],["query"]),initUpload:t.Func([o],[d],[]),list:t.Func([t.Opt(t.Text)],[t.Vec(o)],["query"]),transferFreezingThresholdCycles:t.Func([],[],[]),uploadChunk:t.Func([u],[l],[])})};class r{constructor(){}static getInstance(){return r.instance||(r.instance=new r),r.instance}set(t){this.env=t}get(){if(void 0===this.env)throw new Error("No IC environment configuration set.");return this.env}localIdentity(){return void 0!==this.get().localIdentityCanisterId}}const s=async({canisterId:a,idlFactory:n,identity:i})=>{const s=r.getInstance().localIdentity()?"http://localhost:8000/":"https://ic0.app",c=new e(Object.assign({identity:i},s&&{host:s}));return r.getInstance().localIdentity()&&await c.fetchRootKey(),t.createActor(n,{agent:c,canisterId:a})};var c,o,d,u,l,y,h;(o=c||(c={})).TITLE="title",o.CONTENT="content",o.SPLIT="split",o.GIF="gif",o.AUTHOR="author",o.YOUTUBE="youtube",o.QRCODE="qrcode",o.CHART="chart",o.POLL="poll",o["ASPECT-RATIO"]="aspect-ratio",o.PLAYGROUND="playground",(u=d||(d={})).DEFAULT="default",u.COMMUNITY="community",u.USER="user",function(t){t.LINE="line",t.PIE="pie",t.BAR="bar"}(l||(l={})),(h=y||(y={})).DEFAULT="default",h.DEMO="demo";const p=t=>t?[t]:[],g=t=>null==t?void 0:t[0],k=async t=>{const e=new Blob([JSON.stringify(t)],{type:"application/json; charset=utf-8"});return[...new Uint8Array(await e.arrayBuffer())]},_=async t=>{const e=new Blob([new Uint8Array(t)],{type:"application/json; charset=utf-8"});return JSON.parse(await e.text())},m=({identity:t})=>s({canisterId:r.getInstance().get().managerCanisterId,idlFactory:n,identity:t}),w=async({identity:t})=>q({identity:t,idlFactory:a,initBucket:f}),b=async({identity:t})=>q({identity:t,idlFactory:i,initBucket:C}),q=async({identity:t,idlFactory:e,initBucket:a})=>{if(!t)throw new Error("Invalid identity.");const n=await m({identity:t}),i=await a({managerActor:n}),r=g(i.bucketId);return{bucketId:r,actor:r?await I({identity:t,bucketId:r,idlFactory:e}):void 0}},I=({identity:t,bucketId:e,idlFactory:a})=>s({canisterId:e,idlFactory:a,identity:t}),f=async({managerActor:t})=>g(await t.getData())||await t.initData(),C=async({managerActor:t})=>g(await t.getStorage())||await t.initStorage(),B=BigInt(144e11),F="https://identity.ic0.app";export{r as E,b as a,g as b,k as c,s as d,B as e,_ as f,w as g,m as h,a as i,F as j,p as t}